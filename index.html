<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Ftdi-dot-net-usb-relais : .NET (C#) binding for libftdi in Linux. Control USB devices using FTDI chip controllers in Linux using Mono / Raspberry PI" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Ftdi-dot-net-usb-relais</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/df3xc/FTDI-dot-net-usb-relais">View on GitHub</a>

          <h1 id="project_title">Ftdi-dot-net-usb-relais</h1>
          <h2 id="project_tagline">.NET (C#) binding for libftdi in Linux. Control USB devices using FTDI chip controllers in Linux using Mono / Raspberry PI</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/df3xc/FTDI-dot-net-usb-relais/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/df3xc/FTDI-dot-net-usb-relais/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="scope" class="anchor" href="#scope"><span class="octicon octicon-link"></span></a>Scope</h1>

<p>This is a fork of C# Wrapper libftdinet that wraps the native libftdi from <a href="http://www.intra2net.com/en/developer/libftdi/">http://www.intra2net.com/en/developer/libftdi/</a></p>

<p>The sample Project "RelaisCard" controls a USB Relais Card from <a href="http://www.denkovi.com/">http://www.denkovi.com/</a></p>

<p>This Project shall help programmer to control such Card using the Raspberry PI (but it work with
any other Linux Workstation too)</p>

<p>Have a look at: <a href="http://denkovi.com/productv/107/usb-four-4-relay-output-module-board-for-home-automation.html">http://denkovi.com/productv/107/usb-four-4-relay-output-module-board-for-home-automation.html</a></p>

<p>The Card is USB powered. It provides a good isolation between mains voltage (e.g. 230V) and the low voltage part.</p>

<p>Everything has been tested using Raspberry Pi with Wheezy Image and the Relais Card attached.</p>

<p><a href="https://github.com/df3xc/libftdinet/blob/master/pictures/RelaisCard.JPG">https://github.com/df3xc/libftdinet/blob/master/pictures/RelaisCard.JPG</a></p>

<h1>
<a name="raspberry-power-supply" class="anchor" href="#raspberry-power-supply"><span class="octicon octicon-link"></span></a>Raspberry Power supply</h1>

<p>Raspberry does not work stable if the 5V power supply does not provide enough power. My power supply provides 1.2 Ampere. Relais Card and WLAN Adapter are attached to the USB ports</p>

<p>Here we go .... until you are satisfied you should run everything as root. </p>

<h2>
<a name="install-cmake" class="anchor" href="#install-cmake"><span class="octicon octicon-link"></span></a>Install CMAKE</h2>

<pre><code>apt-get update
apt-get install cmake
</code></pre>

<h2>
<a name="install-libftdi" class="anchor" href="#install-libftdi"><span class="octicon octicon-link"></span></a>Install libftdi</h2>

<p>libFTDI is an open source library to talk to FTDI chips: FT232BM, FT245BM, FT2232C, FT2232D, FT245R and FT232H including the popular bitbang mode. The library is linked with your program in userspace, no kernel driver required</p>

<pre><code>git clone git://developer.intra2net.com/libftdi
cd libdtdi
</code></pre>

<p>Follow instruction from README:</p>

<pre><code> mkdir build
 cd build
 cmake -DCMAKE_INSTALL_PREFIX="/usr" ../
 make
 make install
</code></pre>

<p>Finally the library is at</p>

<ul>
<li> /usr/lib/libftdi1.so.2.0.0</li>
<li> /usr/lib/libftdi1.so.2</li>
<li> /usr/lib/libftdi1.so</li>
</ul><p>And the header file is at:
/usr/include/libftdi1/ftdi.h</p>

<h1>
<a name="connect-usb-relais-card-to-raspberry-pi" class="anchor" href="#connect-usb-relais-card-to-raspberry-pi"><span class="octicon octicon-link"></span></a>Connect USB relais Card to RaspBerry PI</h1>

<p>Verify that the relais card is recognized</p>

<pre><code>lsusb
</code></pre>

<p>The Output should include</p>

<pre><code>Bus 001 Device 004: ID 0403:6001 Future Technology Devices International, Ltd FT232 USB-Serial (UART) IC
</code></pre>

<pre><code>cd libftdi/examples
gcc -I/usr/include/libftdi1/ -lftdi1 -o bitbang bitbang.c
</code></pre>

<p>Execute bitbang and watch the relais switching for a while:</p>

<pre><code>./bitbang
</code></pre>

<p>You may start to create your application using C/C++</p>

<p>But you may also start to create your C# application and run with mono.</p>

<p>Here we go ....</p>

<h2>
<a name="installing-c-net-wrapper" class="anchor" href="#installing-c-net-wrapper"><span class="octicon octicon-link"></span></a>Installing C# .NET Wrapper</h2>

<p>We want to control the relais card using C#. We need a C# wrapper for native DLL  /usr/lib/libftdi1.so.2</p>

<pre><code>git clone git://github.com/df3xc/libftdinet
</code></pre>

<h2>
<a name="create-a-new-c-solution" class="anchor" href="#create-a-new-c-solution"><span class="octicon octicon-link"></span></a>Create a new C# Solution</h2>

<ul>
<li>Option a: Add reference to libftdinet assembly</li>
<li>Option b: add the libftdinet project to your solution, then add reference to this Project</li>
</ul><h2>
<a name="development-environment" class="anchor" href="#development-environment"><span class="octicon octicon-link"></span></a>Development Environment</h2>

<ul>
<li>Windows PC with Visual Studio 2010 Express Edition</li>
<li>Running Samba share on Raspberry PI</li>
<li>Mount the share with Windows.</li>
<li>SSH console: Connection to RaspBerry to start application with mono</li>
<li>No Debugger : just use Console.WriteLine or printf to see what happens</li>
</ul><p>Have Fun!</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Ftdi-dot-net-usb-relais maintained by <a href="https://github.com/df3xc">df3xc</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
